<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

    :root{
      --bg: linear-gradient(180deg,#0f1724 0%, #0b1220 100%);
      --card: rgba(255,255,255,0.03);
      --glass: rgba(255,255,255,0.04);
      --muted: #9aa4b2;
      --accent: #7c5cff;
      --accent-2: #3de7a7;
      --radius: 14px;
    }

    *{box-sizing: border-box}
    html,body{height:100%;}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: radial-gradient( at 10% 20%, rgba(124,92,255,0.12), transparent 20%),
                  radial-gradient( at 90% 80%, rgba(61,231,167,0.06), transparent 20%),
                  #0b1220;
      color:#e6eef8;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .login-card{
      width:100%;
      max-width:520px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.05);
      padding:28px;
      border-radius:var(--radius);
      box-shadow: 0 10px 30px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      backdrop-filter: blur(6px) saturate(120%);
    }

    .brand{
      display:flex;align-items:center;gap:12px;margin-bottom:18px;
    }
    .logo{
      width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));box-shadow:0 6px 18px rgba(60,50,120,0.35);
      display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;font-size:18px
    }

    h3{margin:0;font-size:18px;font-weight:700;letter-spacing:0.02em;color:#ffffff}
    p.lead{margin:6px 0 18px;color:var(--muted);font-size:13px}

    label{display:block;color:var(--muted);font-size:13px;margin-bottom:8px}
    .form-control{
      width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#eaf0ff;
      outline:none;font-size:14px;transition:box-shadow .12s, border-color .12s, transform .06s;
    }
    .form-control::placeholder{color:rgba(230,238,248,0.2)}
    .form-control:focus{box-shadow:0 6px 18px rgba(124,92,255,0.12);border-color:rgba(124,92,255,0.6)}

    .btn-primary-mono{display:inline-block;width:100%;padding:12px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),#5a3bff);color:#fff;font-weight:600;cursor:pointer;box-shadow:0 8px 30px rgba(92,61,255,0.18);transition:transform .08s ease,box-shadow .12s}
    .btn-primary-mono:hover{transform:translateY(-3px);box-shadow:0 18px 40px rgba(92,61,255,0.2)}

    .admin-buttons{display:flex;gap:12px;justify-content:center;margin-top:18px;flex-wrap:wrap}
    .admin-buttons .btn{min-width:150px;border-radius:10px;padding:10px 14px}
    .btn-outline-mono{background:transparent;border:1px solid rgba(255,255,255,0.08);color:var(--muted)}
    .btn-ghost-mono{background:transparent;border:1px dashed rgba(255,255,255,0.04);color:var(--muted)}

    .result-box{width:100%;max-width:880px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:16px;border:1px solid rgba(255,255,255,0.03);margin-top:18px;color:var(--muted)}
    #output{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', monospace;font-size:13px;color:#dbeafe}

    @media (max-width:620px){
      .login-card{padding:20px}
      .admin-buttons{gap:8px}
    }
  </style>
</head>

<body>

  <div class="login-card">
    <h3>Admin Login</h3>

    <form id="loginForm">
      <div class="mb-3">
        <label>Email</label>
        <input type="email" class="form-control" name="email" required>
      </div>

      <div class="mb-3">
        <label>Password</label>
        <input type="password" class="form-control" name="password" required>
      </div>

      <button class="btn-primary-mono">Login</button>
    </form>
  </div>

  <div class="admin-buttons">
    <button id="btnUsers" class="btn btn-outline-mono">List Users</button>
    <button id="btnKeys" class="btn btn-ghost-mono">List Keys</button>
  </div>

  <div class="result-box">
    <pre id="output" class="m-0"></pre>
  </div>

  <script>
    const form = document.getElementById("loginForm");
    const output = document.getElementById("output");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const data = new URLSearchParams(new FormData(form));

      const res = await fetch("/api/admin/login", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: data
      });

      const json = await res.json();
      output.textContent = JSON.stringify(json, null, 2);

      if (json.token) {
        alert("Login success!");
        localStorage.setItem("adminToken", json.token);
      }
    });

    document.getElementById("btnUsers").addEventListener("click", async () => {
      const token = localStorage.getItem("adminToken");
      const res = await fetch("/api/users", {
        headers: { Authorization: "Bearer " + token }
      });
      output.textContent = JSON.stringify(await res.json(), null, 2);
    });

    document.getElementById("btnKeys").addEventListener("click", async () => {
      const token = localStorage.getItem("adminToken");
      const res = await fetch("/api/apikeys", {
        headers: { Authorization: "Bearer " + token }
      });
      output.textContent = JSON.stringify(await res.json(), null, 2);
    });
  </script>

</body>
</html>